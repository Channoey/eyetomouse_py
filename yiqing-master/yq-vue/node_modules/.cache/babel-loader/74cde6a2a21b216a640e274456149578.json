{"ast":null,"code":"import * as echarts from 'echarts';\nimport '@/utils/china.js';\nexport default {\n  name: \"Home\",\n\n  data() {\n    return {\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n      total: {},\n      today: {},\n      extData: {}\n    };\n  },\n\n  mounted() {\n    const options = {\n      //标题样式\n      title: {\n        text: '中国疫情地图',\n        x: \"center\",\n        y: '0%',\n        textStyle: {\n          fontSize: 20,\n          color: \"#333\"\n        }\n      },\n      //这里设置提示框 (鼠标悬浮效果)\n      tooltip: {\n        //数据项图形触发\n        trigger: 'item',\n        //提示框浮层的背景颜色。 (鼠标悬浮后的提示框背景颜色)\n        backgroundColor: \"white\",\n        //字符串模板(地图): {a}（系列名称），{b}（区域名称），{c}（合并数值）,{d}（无）\n        formatter: '地区：{b}<br/>现有确诊病例：{c}'\n      },\n      //视觉映射组件\n      visualMap: {\n        top: 'center',\n        left: 'left',\n        // 数据的范围\n        min: 10,\n        max: 100,\n        text: ['高', '低'],\n        realtime: true,\n        //拖拽时，是否实时更新\n        calculable: true,\n        //是否显示拖拽用的手柄\n        inRange: {\n          // 颜色分布\n          color: ['white', 'Tomato', 'orangered']\n        }\n      },\n      series: [{\n        name: '确诊',\n        type: 'map',\n        mapType: 'china',\n        roam: true,\n        //是否开启鼠标缩放和平移漫游\n        itemStyle: {\n          //地图区域的多边形 图形样式\n          normal: {\n            //是图形在默认状态下的样式\n            label: {\n              show: true,\n              //是否显示标签\n              textStyle: {\n                color: \"black\"\n              }\n            }\n          },\n          zoom: 1,\n          //地图缩放比例,默认为1\n          emphasis: {\n            //是图形在高亮状态下的样式,比如在鼠标悬浮或者图例联动高亮时\n            label: {\n              show: true\n            }\n          }\n        },\n        top: '0%',\n        left: '15%',\n        data: []\n      }]\n    };\n    var chartDom = document.getElementById('main');\n    var myChart = echarts.init(chartDom); // 获取数据\n\n    this.request.get(\"/echarts/epidemic\").then(res => {\n      this.total = res.data.chinaTotal.total;\n      this.today = res.data.chinaTotal.today;\n      this.extData = res.data.chinaTotal.extData;\n      let data = [{\n        name: '南海诸岛',\n        value: 0\n      }];\n      res.data.areaTree[2].children.forEach(item => {\n        data.push({\n          name: item.name,\n          value: item.total.confirm - item.total.dead - item.total.heal\n        });\n        options.series[0].data = data;\n        myChart.setOption(options);\n      });\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAwDA;AACA;AAEA;EACAA,YADA;;EAEAC;IACA;MACAC,kFADA;MAEAC,SAFA;MAGAC,SAHA;MAIAC;IAJA;EAMA,CATA;;EAUAC;IACA;MACA;MACAC;QACAC,cADA;QAEAC,WAFA;QAGAC,OAHA;QAIAC;UACAC,YADA;UAEAC;QAFA;MAJA,CAFA;MAWA;MACAC;QACA;QACAC,eAFA;QAGA;QACAC,wBAJA;QAKA;QACAC;MANA,CAZA;MAoBA;MACAC;QACAC,aADA;QAEAC,YAFA;QAGA;QACAC,OAJA;QAKAC,QALA;QAMAd,gBANA;QAOAe,cAPA;QAOA;QACAC,gBARA;QAQA;QACAC;UACA;UACAZ;QAFA;MATA,CArBA;MAmCAa,SACA;QACA1B,UADA;QAEA2B,WAFA;QAGAC,gBAHA;QAIAC,UAJA;QAKA;QACAC;UACA;UACAC;YACA;YACAC;cACAC,UADA;cACA;cACAtB;gBACAE;cADA;YAFA;UAFA,CAFA;UAWAqB,OAXA;UAYA;UACAC;YACA;YACAH;cAAAC;YAAA;UAFA;QAbA,CANA;QAwBAd,SAxBA;QAyBAC,WAzBA;QA0BAnB;MA1BA,CADA;IAnCA;IAkEA;IACA,qCApEA,CAsEA;;IACA;MACA;MACA;MACA;MAEA;QAAAD;QAAAoC;MAAA;MACAC;QACApC;UAAAD;UAAAoC;QAAA;QAEAE;QACAC;MACA,CALA;IAMA,CAZA;EAcA;;AA/FA","names":["name","data","user","total","today","extData","mounted","title","text","x","y","textStyle","fontSize","color","tooltip","trigger","backgroundColor","formatter","visualMap","top","left","min","max","realtime","calculable","inRange","series","type","mapType","roam","itemStyle","normal","label","show","zoom","emphasis","value","res","options","myChart"],"sourceRoot":"src/views","sources":["Home.vue"],"sourcesContent":["<template>\n  <div style=\"color: #666;font-size: 14px;\">\n    <div style=\"padding-bottom: 20px\">\n      <b>您好！{{ user.username }}</b>\n    </div>\n    <el-row style=\"margin-top: 40px\">\n      <el-col :span=\"12\">\n        <div style=\"width: 500px; margin: 0 auto; padding: 20px; box-shadow: 0 5px 15px -5px rgba(0,0,0,.5); border-radius: 10px;\">\n          <div style=\"text-align: center; margin-bottom: 20px; font-size: 24px\">\n            <b>全国疫情实时数据</b>\n          </div>\n          <div style=\"display: flex; flex-wrap:wrap; justify-content: flex-start;\" >\n            <div class=\"item\" style=\"background-color: lightblue\">\n              <div class=\"item_title\">境外输入</div>\n              <div class=\"item_num\" style=\"color: RoyalBlue\">{{ total.input ? total.input : '未更新' }}</div>\n              <div class=\"item_num item_num_plus\">较昨日 <span style=\"color: RoyalBlue\">+{{ today.input }}</span></div>\n            </div>\n            <div class=\"item\" style=\"background-color: aliceblue\">\n              <div class=\"item_title\">无症状感染者</div>\n              <div class=\"item_num\" style=\"color: LightCoral\">{{ extData.noSymptom ? extData.noSymptom : '未更新' }}</div>\n              <div class=\"item_num item_num_plus\">较昨日 <span style=\"color: LightCoral\">+{{ extData.incrNoSymptom }}</span></div>\n            </div>\n            <div class=\"item\" style=\"background-color: lightgoldenrodyellow\">\n              <div class=\"item_title\">现有确诊</div>\n              <div class=\"item_num\" style=\"color: OrangeRed\">{{ ( total.confirm - total.dead - total.heal ) ? ( total.confirm - total.dead - total.heal ) : '未更新' }}</div>\n              <div class=\"item_num item_num_plus\">较昨日 <span style=\"color: OrangeRed\">+{{ today.confirm - today.dead - today.heal ? today.confirm - today.dead - today.heal : '' }}</span></div>\n            </div>\n            <div class=\"item\" style=\"background-color: lightgray\">\n              <div class=\"item_title\">累计确诊</div>\n              <div class=\"item_num\" style=\"color: Brown\">{{ total.confirm ? total.confirm : '未更新' }}</div>\n              <div class=\"item_num item_num_plus\">较昨日 <span style=\"color: Brown\">+{{ today.confirm }}</span></div>\n            </div>\n            <div class=\"item\" style=\"background-color: lightpink\">\n              <div class=\"item_title\">累计死亡</div>\n              <div class=\"item_num\" style=\"color: #333\">{{ total.dead ? total.dead : '未更新' }}</div>\n              <div class=\"item_num item_num_plus\">较昨日 <span style=\"color: #333\">+{{ today.dead }}</span></div>\n            </div>\n            <div class=\"item\" style=\"background-color: lightgreen\">\n              <div class=\"item_title\">累计治愈</div>\n              <div class=\"item_num\" style=\"color: green\">{{ total.heal ? total.heal : '未更新' }}</div>\n              <div class=\"item_num item_num_plus\">较昨日 <span style=\"color: green\">+{{ today.heal }}</span></div>\n            </div>\n          </div>\n        </div>\n      </el-col>\n\n      <el-col :span=\"12\">\n        <div id=\"main\" style=\"width: 100%; height: 500px\"></div>\n      </el-col>\n\n    </el-row>\n\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts'\nimport '@/utils/china.js'\n\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n      total: {},\n      today: {},\n      extData: {}\n    }\n  },\n  mounted() {\n    const options = {\n      //标题样式\n      title: {\n        text: '中国疫情地图',\n        x: \"center\",\n        y: '0%',\n        textStyle: {\n          fontSize: 20,\n          color: \"#333\"\n        },\n      },\n      //这里设置提示框 (鼠标悬浮效果)\n      tooltip: {\n        //数据项图形触发\n        trigger: 'item',\n        //提示框浮层的背景颜色。 (鼠标悬浮后的提示框背景颜色)\n        backgroundColor: \"white\",\n        //字符串模板(地图): {a}（系列名称），{b}（区域名称），{c}（合并数值）,{d}（无）\n        formatter: '地区：{b}<br/>现有确诊病例：{c}'\n      },\n      //视觉映射组件\n      visualMap: {\n        top: 'center',\n        left: 'left',\n        // 数据的范围\n        min: 10,\n        max: 100,\n        text: ['高', '低'],\n        realtime: true,  //拖拽时，是否实时更新\n        calculable: true,  //是否显示拖拽用的手柄\n        inRange: {\n          // 颜色分布\n          color: ['white', 'Tomato', 'orangered']\n        }\n      },\n      series: [\n        {\n          name: '确诊',\n          type: 'map',\n          mapType: 'china',\n          roam: true,\n          //是否开启鼠标缩放和平移漫游\n          itemStyle: {\n            //地图区域的多边形 图形样式\n            normal: {\n              //是图形在默认状态下的样式\n              label: {\n                show: true,//是否显示标签\n                textStyle: {\n                  color: \"black\"\n                }\n              }\n            },\n            zoom: 1,\n            //地图缩放比例,默认为1\n            emphasis: {\n              //是图形在高亮状态下的样式,比如在鼠标悬浮或者图例联动高亮时\n              label: {show: true}\n            }\n          },\n          top: '0%',\n          left: '15%',\n          data: []\n        }\n      ]\n    }\n    var chartDom = document.getElementById('main');\n    var myChart = echarts.init(chartDom);\n\n    // 获取数据\n    this.request.get(\"/echarts/epidemic\").then(res => {\n      this.total = res.data.chinaTotal.total\n      this.today = res.data.chinaTotal.today\n      this.extData = res.data.chinaTotal.extData\n\n      let data = [ {name: '南海诸岛', value: 0} ]\n      res.data.areaTree[2].children.forEach(item => {\n        data.push({ name: item.name, value: item.total.confirm - item.total.dead - item.total.heal })\n\n        options.series[0].data = data\n        myChart.setOption(options)\n      })\n    })\n\n  }\n}\n</script>\n\n<style>\n.item {\n  text-align: center;\n  width: 150px;\n  height: 150px;\n  margin-right: 5px;\n  margin-bottom: 5px;\n}\n.item:nth-child(3n) {\n  margin-right: 0;\n}\n.item_title {\n  font-size: 16px;\n  font-weight: bold;\n  margin-top: 20px;\n}\n.item_num {\n  margin-top: 10px;\n  font-size: 30px;\n  font-weight: bold;\n}\n.item_num_plus {\n  font-size: 16px;\n  color: #666;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}